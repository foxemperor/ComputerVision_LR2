# Контрольные вопросы - Лабораторная работа №2

## 1. Принципы фильтрации командой inRange

Функция `cv2.inRange()` выполняет бинарную фильтрацию изображения по заданному диапазону значений пикселей.

**Принцип работы:**
- Функция проверяет каждый пиксель изображения
- Если значения пикселя попадают в диапазон [lower, upper], пиксель становится белым (255)
- Если значения вне диапазона - пиксель становится черным (0)
- Результат - бинарная маска

**Формула:**
dst(x,y) = 255, если lower ≤ src(x,y) ≤ upper
dst(x,y) = 0, иначе

**Особенность для красного цвета:**
В HSV красный находится на краях спектра (H: 0-10 и 170-180), поэтому требуется две маски и операция bitwise_or для их объединения.

---

## 2. Команды erode и dilate

**Эрозия (erode):**
- Уменьшает границы объектов переднего плана
- Удаляет мелкие объекты и шум
- Пиксель остается белым только если ВСЕ пиксели под ядром белые

Математическая формула:
dst = erode(src, kernel) = min{src(x+x', y+y') | (x',y') ∈ kernel}

**Дилатация (dilate):**
- Увеличивает границы объектов
- Заполняет небольшие дыры
- Пиксель становится белым если ХОТЯ БЫ ОДИН пиксель под ядром белый

Математическая формула:
dst = dilate(src, kernel) = max{src(x+x', y+y') | (x',y') ∈ kernel}

---

## 3. Морфологическое открытие и закрытие

**Морфологическое открытие (Opening = Erosion → Dilation):**
- Удаляет мелкие объекты и шум
- Сохраняет форму крупных объектов
- Очищает белые точки шума на фоне

**Морфологическое закрытие (Closing = Dilation → Erosion):**
- Заполняет небольшие дыры внутри объектов
- Соединяет близко расположенные области
- Устраняет черные дыры внутри белых областей

**Необходимость применения:**
1. Реальные изображения содержат шум (освещение, артефакты)
2. После цветовой фильтрации остаются ложные срабатывания
3. Объекты могут иметь разрывы из-за неравномерного освещения
4. Улучшают качество сегментации без потери формы

---

## 4. Моменты изображения

**Моменты изображения** - числовые характеристики, вычисляемые на основе распределения интенсивности пикселей.

Общая формула момента порядка (p+q):
M_pq = Σ Σ x^p * y^q * I(x,y)
x y
где I(x,y) - интенсивность пикселя

**Моменты первого порядка:**
- M00 - момент нулевого порядка (площадь объекта)
- M10 - момент первого порядка по x
- M01 - момент первого порядка по y

**Применение:**
- Вычисление площади объекта
- Нахождение центра масс
- Определение ориентации
- Распознавание формы
- Инвариантные дескрипторы

---

## 5. Центроид объекта

**Центроид** - центр масс объекта, геометрический центр области на изображении.

**Формулы вычисления:**
cx = M10 / M00
cy = M01 / M00

**Физический смысл:**
Точка, в которой находился бы центр массы объекта при равномерной плотности.

**Применение:**
1. Трекинг объектов - отслеживание движения
2. Позиционирование - определение местоположения
3. Анализ траектории движения
4. Робототехника - управление захватом
5. Калибровка - центрирование объектов

**Важно:** Перед вычислением проверять M00 ≠ 0 для избежания деления на ноль.
